{"version":3,"sources":["../../../../../nodes/vendors/Ollama/transport/index.ts"],"sourcesContent":["import type {\n\tIDataObject,\n\tIExecuteFunctions,\n\tIHttpRequestMethods,\n\tILoadOptionsFunctions,\n} from 'n8n-workflow';\n\ntype RequestParameters = {\n\theaders?: IDataObject;\n\tbody?: IDataObject | string;\n\tqs?: IDataObject;\n\toption?: IDataObject;\n};\n\nexport async function apiRequest(\n\tthis: IExecuteFunctions | ILoadOptionsFunctions,\n\tmethod: IHttpRequestMethods,\n\tendpoint: string,\n\tparameters?: RequestParameters,\n) {\n\tconst { body, qs, option } = parameters ?? {};\n\n\tconst credentials = await this.getCredentials<{\n\t\tapiKey?: string;\n\t\tbaseUrl: string;\n\t}>('ollamaApi');\n\tconst apiKey = credentials.apiKey;\n\tif (apiKey !== undefined && typeof apiKey !== 'string') {\n\t\tthrow new Error('API key must be a string');\n\t}\n\n\tconst url = new URL(endpoint, credentials.baseUrl).toString();\n\n\tconst headers = parameters?.headers ?? {};\n\tif (apiKey) {\n\t\theaders.Authorization = `Bearer ${apiKey}`;\n\t}\n\n\tconst options = {\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\t...headers,\n\t\t},\n\t\tmethod,\n\t\tbody,\n\t\tqs,\n\t\turl,\n\t\tjson: true,\n\t};\n\n\tif (option && Object.keys(option).length !== 0) {\n\t\tObject.assign(options, option);\n\t}\n\n\treturn await this.helpers.httpRequestWithAuthentication.call(this, 'ollamaApi', options);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAcA,eAAsB,WAErB,QACA,UACA,YACC;AACD,QAAM,EAAE,MAAM,IAAI,OAAO,IAAI,cAAc,CAAC;AAE5C,QAAM,cAAc,MAAM,KAAK,eAG5B,WAAW;AACd,QAAM,SAAS,YAAY;AAC3B,MAAI,WAAW,UAAa,OAAO,WAAW,UAAU;AACvD,UAAM,IAAI,MAAM,0BAA0B;AAAA,EAC3C;AAEA,QAAM,MAAM,IAAI,IAAI,UAAU,YAAY,OAAO,EAAE,SAAS;AAE5D,QAAM,UAAU,YAAY,WAAW,CAAC;AACxC,MAAI,QAAQ;AACX,YAAQ,gBAAgB,UAAU,MAAM;AAAA,EACzC;AAEA,QAAM,UAAU;AAAA,IACf,SAAS;AAAA,MACR,gBAAgB;AAAA,MAChB,GAAG;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,MAAM;AAAA,EACP;AAEA,MAAI,UAAU,OAAO,KAAK,MAAM,EAAE,WAAW,GAAG;AAC/C,WAAO,OAAO,SAAS,MAAM;AAAA,EAC9B;AAEA,SAAO,MAAM,KAAK,QAAQ,8BAA8B,KAAK,MAAM,aAAa,OAAO;AACxF;","names":[]}